p8105_hw2_gj2356
================
Ghislaine Jumonville
2023-09-27

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.3     ✔ readr     2.1.4
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.0
    ## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

## PROBLEM 1

Cleaning the dataset `pols-month.csv` in the code chunk below. In the
new dataframe `pols_month_df`, the variable `mon` is separated into
`year`, `month`, and `day`. There is a new variable `president` that
takes on the values `dem` if `prez_dem = 1` or `gop` if `prez_gop = 1`.
The variables `prez_dem`, `prez_gop`, and `date` are removed from the
final data frame.

``` r
pols_month_df = read_csv("./fivethirtyeight_datasets/pols-month.csv") |>
                separate(mon, into = c("year", "month", "day"), sep = "-") |> 
                mutate(
                  month = 
                          case_match(
                            month,
                            "01" ~ "Jan",
                            "02" ~ "Feb",
                            "03" ~ "Mar",
                            "04" ~ "Apr",
                            "05" ~ "May",
                            "06" ~ "Jun",
                            "07" ~ "Jul",
                            "08" ~ "Aug",
                            "09" ~ "Sep",
                            "10" ~ "Oct",
                            "11" ~ "Nov",
                            "12" ~ "Dec"),
                  month = as.factor(month)) |> 
                mutate(
                  president = case_when( prez_gop == 1 ~ "gop", 
                                              prez_gop == 0 ~ "dem" )) |> 
              select(-prez_dem, -prez_gop, -day)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Cleaning the next dataset `snp.csv` in the code chunk below. The
resulting data frame `snp_df` has the `date` split into `month`and
`year` with `day` removed. The months have been translated from numbers
to their names. I have added either `20` or `19` to the beginning of the
years so that they have four characters.

``` r
snp_df = read_csv("./fivethirtyeight_datasets/snp.csv") |> 
        separate(date, into = c("month", "day", "year"), sep = "/") |> 
        select(year, month, close) |> 
        mutate(
            month = 
                  case_match(
                    month,
                      "1" ~ "Jan",
                      "2" ~ "Feb",
                      "3" ~ "Mar",
                      "4" ~ "Apr",
                      "5" ~ "May",
                      "6" ~ "Jun",
                      "7" ~ "Jul",
                      "8" ~ "Aug",
                      "9" ~ "Sep",
                      "10" ~ "Oct",
                      "11" ~ "Nov",
                      "12" ~ "Dec"),
            month = as.factor(month)) |> 
        mutate(
          year = 
            case_when(
              year < 16 ~ paste0("20", year),
              year >= 16 ~ paste0("19", year))
            )
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Cleaning the last dataset `unemployment.csv` in the code chunk below.
Here I used `pivot_longer` to transform the existing data frame to have
more rows and less columns by making two new variables `month` and
`percent_unemployment`. I also had to rename `Year` to `year` and make
it a character variable type instead of numeric for joining purposes.

``` r
unemployment_df = read_csv("./fivethirtyeight_datasets/unemployment.csv") |> 
                  pivot_longer(
                      Jan:Dec,
                      names_to = "month",
                      values_to = "percent_unemployment") |> 
                  rename(year = Year) |> 
                  mutate(year = as.character(year))
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Here I used `left_join` to join `snp_df` into `pols_month_df` by `year`
and `month` to create `snp_pols_df`. Then I repeated the process joining
`unemployment_df` into `snp_pols_df` to create the final data frame
`hw2_joined_df`.

``` r
snp_pols_df = left_join(pols_month_df, snp_df, by = c("year","month"))
hw2_joined_df = left_join(snp_pols_df, unemployment_df, by = c("year","month"))
```

The first dataset `pols_month_df` contained 822 observations and 9
variables that had information on US politicians and their political
affiliations at different times, ranging from 1947 to 2015. The next
dataset `snp_df` contained 787 observations and 2 variables that showed
the Standard & Poor’s stock market index (S&P) and the corresponding
date with years ranging from 1950 to 2015. The last dataset
`unemployment_df` contained 68 observations and 13 variables before it
was transformed. There was information about the percentage of
unemployment for each month and year, ranging from 1948 to 2015.

The final and resulting dataset from joining the 3 aforementioned
datasets together, `hw2_joined_df`, has 822 observations and 11
variables. The range of `year` is from 1947 to 2015. There is
information on the political affiliation of the president (`president`)
for any given year along with the number of national politicians that
are either democratic or republican. There is also information on the
S&P at the time (`close`) along with unemployment percentages
(`percent_unemployment`).

## PROBLEM 2
